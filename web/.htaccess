# ShareMyCard .htaccess Configuration

# Enable error logging
php_flag log_errors on
php_value error_log /home/sharipbf/public_html/error.log

# Set error reporting level (for development)
php_value error_reporting "E_ALL"

# Display errors (for development - remove in production)
php_flag display_errors on

# Set timezone
php_value date.timezone "America/New_York"

# File upload settings
php_value upload_max_filesize 25M
php_value post_max_size 25M
php_value max_execution_time 300
php_value max_input_time 300
php_value memory_limit 256M

# Security headers
Header always set X-Content-Type-Options nosniff
Header always set X-Frame-Options DENY
Header always set X-XSS-Protection "1; mode=block"

# Explicitly allow favicon and icon files
<FilesMatch "^(favicon\.ico|favicon-.*\.png|apple-touch-icon\.png|android-chrome-.*\.png)$">
    Require all granted
</FilesMatch>

# Prevent access to sensitive files
<Files "*.log">
    Order allow,deny
    Deny from all
</Files>

<Files "*.env">
    Order allow,deny
    Deny from all
</Files>

<Files "database.php">
    Order allow,deny
    Deny from all
</Files>

<Files "gmail.php">
    Order allow,deny
    Deny from all
</Files>

# Prevent directory browsing
Options -Indexes

# Enable URL rewriting
RewriteEngine On

# Allow favicon and icon files to be served directly (before any other rules)
# Check if file exists and serve it directly
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^favicon\.ico$ - [L]
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^favicon-.*\.png$ - [L]
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^apple-touch-icon\.png$ - [L]
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^android-chrome-.*\.png$ - [L]

# Redirect to HTTPS (uncomment for production)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Custom error pages (optional)
# Route public helper pages
RewriteRule ^qr/.*$ /public/qr.php [NC,L,QSA]
RewriteRule ^capture-lead\.php$ /public/capture-lead.php [NC,L,QSA]

# ErrorDocument 404 /404.php
# ErrorDocument 500 /500.php
